---
title: 记一次关于nginx丢失pid文件的问题
date: 2020-05-10
sidebarDepth: 0
tags:
 - Linux
 - nginx
categories: 
 - Linux
---

## pid文件丢失的原因  
之前在为网站配置SSL证书时使用pkill命令强制结束了nginx服务，导致无法正常启动nginx服务。  
使用service nginx status查看发现如下报错提示：
![](https://s1.ax1x.com/2020/05/10/Y8wphF.jpg)  
## 解决方法
``` sh
#关闭nginx服务
pkill -9 nginx

#平滑启动nginx 前者为nginx的二进制文件路径，后者为nginx配置路径
/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf
```  
使用以上命令后在/usr/local/nginx/logs里会有nginx.pid这个文件  
但是前面报错的提示中nginx.pid在/usr/local/nginx/目录下，需要进行修改  
``` sh
vim /usr/lib/systemd/system/nginx.service
#修改PIDFile
PIDFile=/usr/local/nginx/logs/nginx.pid
systemctl daemon-reload
```  
再次使用service nginx start启动nginx，发现已经不报错，问题解决。

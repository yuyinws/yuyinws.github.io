---
title: centOS下部署使用openvas
date: 2020-07-21
sidebarDepth: 0
tags:
 - Linux
 - openvas
 - docker
categories: 
 - Linux
---
### 1.安装docker

#### 使用安装脚本一键安装

```bash
#使用curl获取安装脚本
curl -fsSL get.docker.com -o get-docker.sh
#执行安装脚本,安装过程需要等待一段时间
sh get-docker.sh --mirror Ailyun
#启动docker服务
systemctl start docker
```

> 安装过程中如果遇到【Delta RPMs disabled because /usr/bin/applydeltarpm not installed】则执行:
>
> ```bash
> yum -y install deltarpm
> ```
>
> 安装过程中如果遇到【docker-ce-19.03.12-3.el7.x86_64.rpm 的公钥尚未安装】则执行
>
> ```bash
> wget https://get.docker.com/gpg
> rpmkeys --import ./gpg
> ```
>
> 

#### 配置国内镜像源

```bash
vim /etc/docker/daemon.json #如果没有这个文件则新建
#输入以下内容,这里使用了网易源，其他镜像地址自行百度
{
	"registry-mirrors": [
    	"http://hub-mirror.c.163.com"
  ]
}
```

重启docker使镜像源生效

```bash
systemctl daemon-reload
systemctl restart docker
```

### 2.拉取镜像

```bash
docker pull mikesplain/openvas
docker images #查看本地镜像
```

![docker images](https://pic.downk.cc/item/5f168b1114195aa594b70e7b.png)

### 3.创建容器

```bash
#将docker中的443接口映射到宿主机的接口，前一个443代表宿主机端口，后一个443代表docker端口，如果宿主机的443端口被占用则换成其他端口
#PUBLIC_HOSTNAME后面填写服务器的内网地址
#--name后面的openvas代表本容器的名称
#mikesplain/openvas代表指定的镜像名
docker run -d -p 443:443 -e PUBLIC_HOSTNAME=XXX --name openvas mikesplain/openvas
```

```bash
#查看所有容器的状态
docker ps -a
```

![docker ps -a](https://pic.downk.cc/item/5f168d0614195aa594b7e499.png)

### 4.访问openvas

打开浏览器，输入http://<服务器IP>:<映射端口>。可以看到openvas的登录页面

![openvas](https://pic.downk.cc/item/5f168e2514195aa594b850e4.png)

输入账号密码登录

账号:admin

密码:admin

### 5.openvas使用

#### 创建扫描目标

依次选择Configuration-Targets

![conf-target](https://pic.downk.cc/item/5f16a08b14195aa594c36520.png)

点击左上角蓝色星星（New Target）按钮

![new target](https://pic.downk.cc/item/5f16a18314195aa594c3ce2f.png)

完善SSH登录信息

![ssh](https://pic.downk.cc/item/5f16b78414195aa594cce313.png)

完善信息后点击Create 

#### 创建扫描任务

依次选择Scans->Tasks->new Task

![new task](https://pic.downk.cc/item/5f16a21814195aa594c40730.png)



输入相关信息后点击create按钮

![edit task](https://pic.downk.cc/item/5f16a2db14195aa594c45357.png)

点击start按钮开始扫描任务

![start](https://pic.downk.cc/item/5f16a34114195aa594c47d88.png)

#### 导出扫描结果报告

依次选择Scans->Results->Date

![result](https://pic.downk.cc/item/5f16a72e14195aa594c69a17.png)

左上角选择结果报告格式，点击下载按钮

![report](https://pic.downk.cc/item/5f16a7a314195aa594c6ca8c.png)

导出的pdf结果

<img src="https://pic.downk.cc/item/5f16a86c14195aa594c72198.png" alt="report2" style="zoom:70%;" />